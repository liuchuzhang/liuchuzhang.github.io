[{"title":"my first post","tag":["react","nodejs","前端","javascript","article","develop","markdown","test"],"time":"2018-10-26 10:44:48","url":"/post/2018-10-26T10;44;48_my-first-post","image":"/contents/2018-10-26T10;44;48_my-first-post/image.jpg","content":"\r\n## 我的第一篇\r\n\r\n听说爱学(装)习(逼)的人都喜欢弄个博客。\r\n\r\n弄很多标签...\r\n\r\n然而并没有技术点...\r\n\r\n第一篇随便点,啥都不写\r\n\r\n...\r\n\r\n...\r\n\r\n\r\n\r\n"},{"title":"第二篇","tag":["test","markdown","yarn","npm"],"time":"2018-10-26 11:05:13","url":"/post/2018-10-26T11;05;13_second","image":"/contents/2018-10-26T11;05;13_second/image.jpg","content":"\r\n## 第二篇\r\n\r\n### 记录无缘无故 `yarn install` 网络连接的问题\r\n\r\n安装依赖\r\n\r\n```shell\r\n$ yarn install\r\nyarn install v1.10.1\r\ninfo No lockfile found.\r\n[1/4] Resolving packages...\r\n[2/4] Fetching packages...\r\ninfo There appears to be trouble with your network connection. Retrying...\r\ninfo There appears to be trouble with your network connection. Retrying...\r\ninfo There appears to be trouble with your network connection. Retrying...\r\ninfo There appears to be trouble with your network connection. Retrying...\r\n```\r\n\r\n\r\n平时可以正常安装的今天突然就安装不上了。 \r\n之前遇到过这样的问题原因是因为安装 node sass 。\r\n要装依赖的这个项目没有 node sass 。上百度寻找解决办法无果，这类问题很少。\r\n\r\nGoogle 上找到解决，需要要删掉 yarn 和 npm 的代理。\r\n\r\n输入命令\r\n\r\n```shell\r\nyarn config delete proxy\r\nnpm config rm proxy\r\nnpm config rm https-proxy\r\nyarn config delete https-proxy\r\n```"},{"title":"日常记录","tag":["vue"],"time":"2018-10-29 09:54:23","url":"/post/2018-10-29T09;54;23_daily","image":"/contents/2018-10-29T09;54;23_daily/image.jpg","content":"\r\n## 记录\r\n\r\nvue version:2.3.4 `this.$refs.input.focus()` 无效，最新版本无此问题。    \r\n暂时的解决方法\r\n```javascript\r\nthis.$nextTick(() => {\r\n    this.$refs.input.focus()\r\n})\r\n```\r\n\r\n\r\n"},{"title":"计算浮点数","tag":["javascript"],"time":"2018-12-12 04:32:42","url":"/post/2018-12-12T04;32;42_calculate","image":"/contents/2018-12-12T04;32;42_calculate/image.jpg","content":"浮点数的加减乘除 (网络收集，暂未发现计算错误的情况)\n\n```javascript\n/**\n * 浮点数相加\n * @param {*} a\n * @param {*} b\n */\nexport function addFloat(a, b) {\n  var c, d, e\n  try {\n    c = a.toString().split('.')[1].length\n  } catch (f) {\n    c = 0\n  }\n  try {\n    d = b.toString().split('.')[1].length\n  } catch (f) {\n    d = 0\n  }\n  return (\n    (e = Math.pow(10, Math.max(c, d))), (mulFloat(a, e) + mulFloat(b, e)) / e\n  )\n}\n\n/**\n * 浮点数相减\n * @param {*} a\n * @param {*} b\n */\nexport function subFloat(a, b) {\n  var c, d, e\n  try {\n    c = a.toString().split('.')[1].length\n  } catch (f) {\n    c = 0\n  }\n  try {\n    d = b.toString().split('.')[1].length\n  } catch (f) {\n    d = 0\n  }\n  return (\n    (e = Math.pow(10, Math.max(c, d))), (mulFloat(a, e) - mulFloat(b, e)) / e\n  )\n}\n\n/**\n * 浮点数相乘\n * @param {*} a\n * @param {*} b\n */\nexport function mulFloat(a, b) {\n  var c = 0,\n    d = a.toString(),\n    e = b.toString()\n  try {\n    c += d.split('.')[1].length\n  } catch (f) {}\n  try {\n    c += e.split('.')[1].length\n  } catch (f) {}\n  return (\n    (Number(d.replace('.', '')) * Number(e.replace('.', ''))) / Math.pow(10, c)\n  )\n}\n\n/**\n * 浮点数相除\n * @param {*} a\n * @param {*} b\n */\nexport function divFloat(a, b) {\n  var c,\n    d,\n    e = 0,\n    f = 0\n  try {\n    e = a.toString().split('.')[1].length\n  } catch (g) {}\n  try {\n    f = b.toString().split('.')[1].length\n  } catch (g) {}\n  return (\n    (c = Number(a.toString().replace('.', ''))),\n    (d = Number(b.toString().replace('.', ''))),\n    mulFloat(c / d, Math.pow(10, f - e))\n  )\n}\n\n```\n"},{"title":"下载二进制文件","tag":["download","javascript"],"time":"2018-12-12 11:38:52","url":"/post/2018-12-12T11;38;52_downloadjs","image":"/contents/2018-12-12T11;38;52_downloadjs/image.jpg","content":"## 在 IE 下 `download` 属性无效。\n\n使用 [downloadjs](https://github.com/rndme/download)\n 安装 `npm install downloadjs` 后导入\n```js\nconst url = 'http:// ... /abc.jpg'\nlet xhr\nif (window.XMLHttpRequest) {\n    // code for IE7+, Firefox, Chrome, Opera, Safari\n    xhr = new XMLHttpRequest()\n} else {\n    // code for IE6, IE5\n    xhr = new ActiveXObject('Microsoft.XMLHTTP')\n}\nxhr.open('GET', url, true)\nxhr.responseType = 'blob'\nxhr.onload = function(e) {\n    // fileName：下载的文件名 \n    // 参数3：.xlsx 对应的 Mime-Type\n    download(e.target.response, fileName, fileMime['.xlsx'])\n}\nxhr.send()\n\n// url直接下载（不可给文件名）\ndownload(url)\n```\n\n常用 Content-Type(Mime-Type)  [更多](http://tool.oschina.net/commons)\n\n```js\n// 通用二进制文件 `application/octet-stream`\nexport default {\n  '.xls': 'application/vnd.ms-excel',\n  '.xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  '.png': 'image/png',\n  '.jpg': 'image/jpeg',\n  '.gif': 'image/gif',\n  '.ico': 'image/x-icon',\n  '.docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  '.doc': 'application/msword',\n  '.pdf': 'application/pdf',\n  '.zip': 'application/zip',\n  '.rar': 'application/octet-stream',\n  '.tgz': 'application/x-compressed',\n  '.psd': 'application/octet-stream',\n  '.mp3': 'audio/mpeg3',\n  '.mp4': 'application/octet-stream'\n}\n```\n"}]